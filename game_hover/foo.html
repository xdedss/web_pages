<html> 
<head> 
        <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="sk.merge.js" type="text/javascript"></script> 

</head> 

<body> 

<script type="text/javascript"> 
    

// Here's everything you need to run a python program in skulpt
// grab the code from your textarea
// get a reference to your pre element for output
// configure the output function
// call Sk.importMainWithBody()
function runit(pre) { 
    
    Sk.pre = pre;
    //Sk.configure({output: text=>console.log(text), read:builtinRead}); 
    Sk.configure({ 
        output: function(str) {
            console.log(str);
        },
        read: function (x) {
            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined) {
                throw "File not found: '" + x + "'";
			}
            return Sk.builtinFiles["files"][x];
        },
		retainglobals: true
    });
    //(Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
    Sk.builtins.foo = function(a, b) {
        console.log(a);
        console.log('im called');
        return Sk.ffi.remapToJs(a) + Sk.ffi.remapToJs(b);
    }
    //Sk.builtins.print = null;
    //Sk.builtins.foo.co_varnames = ['a', 'b'];
    //Sk.builtins.foo.co_numargs = 2;
    try{
        //console.log($('#yourcode').val());
        Sk.importMainWithBody("<stdin>", false, $('#yourcode').val(), false)
        //Sk.importMainWithBody("<stdin>", false, $('#yourcode2').val(), false)
    }
    catch(e){
        console.log(e.toString());
        window.e = e;
    }
   
//   var myPromise = Sk.misceval.asyncToPromise(function() {
//        //Sk.globals.foo = a => console.log(a);
//       return Sk.importMainWithBody("<stdin>", false, $('#yourcode').val(), true);
//   });
//   myPromise.then(function(mod) {
//       console.log('success');
//   },
//       function(err) {
//       console.log(err.toString());
//   });
} 
function test(){
    //Sk.importModuleInternal_("test", false, "test", $('#yourcode2').val())
}
</script> 

<h3>Try This</h3> 
<form> 
<textarea id="yourcode" cols="40" rows="10">

print ( "Hello World" )
</textarea>
<textarea id="yourcode2" cols="40" rows="10">

</textarea>
<br/> 
<button type="button" onclick="runit(1)">Run</button> 
<button type="button" onclick="test()">Run2</button> 
</form> 
<pre id="output" ></pre> 
<!-- If you want turtle graphics include a canvas -->
<div id="mycanvas"></div> 

</body> 

</html> 